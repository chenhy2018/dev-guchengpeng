#!/usr/bin/env qiniutest

host foo.com 127.0.0.1:7777
auth qinutest `authstub -uid 1 -utype 4`

post http://foo.com/v1/foo/foo123/bar
auth qinutest
json '{"a": "1", "b": "2"}'
ret 200
echo $(resp)
json '{"id": $(id)}'

get http://foo.com/v1/foo/$(id)
auth qinutest
ret 200
echo $(resp)
json '{"id": $(id), "foo": "foo123", "a": "1", "b": "2"}'

get http://127.0.0.1:7777/v1/foo/$(id)
auth qinutest
ret 200
echo $(resp)
json '{"id": $(id), "foo": "foo123", "a": "1", "b": "2"}'

get http://foo.com/v1/foo/1.3
auth qinutest
ret 404
echo $(resp)
json '{
	"error": "id not found"
}'

