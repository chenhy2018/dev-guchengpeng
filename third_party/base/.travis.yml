language: go
go:
  - 1.10.x
before_script:
  - memcached -p 11211 &
  - memcached -p 11212 &
  - export QBOXROOT=$TRAVIS_BUILD_DIR/..
  - export QINIU_ACCESS_KEY="iN7NgwM31j4-BZacMjPrOQBs34UG1maYCAQmhdCV"
  - export QINIU_SECRET_KEY="6QTOr2Jg1gcZEWDQXKOGZh5PziC2MCV5KsntT70j"
  - wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-1.8.3.tgz;tar zxvf mongodb-linux-x86_64-1.8.3.tgz;cd mongodb-linux-x86_64-1.8.3/bin;mkdir data;./mongod --port=27016 --dbpath=data --fork --logpath=mongolog.log;sleep 2;./mongod --version; cd ../../;
  - wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-2.4.14.tgz;tar zxvf mongodb-linux-x86_64-2.4.14.tgz;cd mongodb-linux-x86_64-2.4.14/bin;mkdir data;./mongod --port=27017 --dbpath=data --fork --logpath=mongolog.log;sleep 2;./mongod --version; cd ../..;
script:
  - echo $TRAVIS_BRANCH
  - echo $TRAVIS_COMMIT
  - echo $TRAVIS_COMMIT_RANGE
  - echo $TRAVIS_PULL_REQUEST
  - echo $TRAVIS_REPO_SLUG
  - echo $TRAVIS_JOB_ID
  - echo $TRAVIS_JOB_NUMBER
  - echo $TRAVIS_BUILD_ID
  - echo $TRAVIS_BUILD_NUMBER
  - source env.sh
  - source mockacc/env.sh
  - make
  - make test
  - make style
